extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/component-mini.pug

block main
    +alert-success("7000")
    +alert-error("7000")
    .left-1
        h2 #{pageTitle}
    input(permissions-data type="text" value=records class="d-none")
    div(class="text-right")
        button(
            type="submit"
            class="btn btn-primary mb-md-3"
            button-submit-permissions
        ) Update 
    table(
        class="table table-hover table-sm"
        table-permissions
    )
        thead 
            th
                .text-warning Features 
            each item, index in records
                th(class="text-center") 
                    .text-danger #{item.title}
        tbody 
            tr(data-name="id")
                td
                    each item, index in records
                        td(class="text-center")
                            input(type="text" value=item.id  class="d-none")
            tr
                td(colspan="4")
                    b(class="text-success") Category 
            tr(data-name="products-category_view")
                +permission("Watch")
            tr(data-name="products-category_create")
                +permission("Add New")
            tr(data-name="products-category_edit")
                +permission("Edit")
            tr(data-name="products-category_delete")
                +permission("Delete")

            tr
                td(colspan="4")
                    b(class="text-success") Product 
            tr(data-name="products_view")
                +permission("Watch")
            tr(data-name="products_create")
                +permission("Add New")
            tr(data-name="products_edit")
                +permission("Edit")
            tr(data-name="products_delete")
                +permission("Delete")

            tr
                td(colspan="4")
                    b(class="text-success") Roles Management
            tr(data-name="roles_view")
                +permission("Watch")
            tr(data-name="roles_create")
                +permission("Add New")
            tr(data-name="roles_edit")
                +permission("Edit")
            tr(data-name="roles_delete")
                +permission("Delete")
            tr(data-name="roles_division")
                +permission("Permission Division")



    form(
        id="form-change-permissions"
        method="POST"
        action=`${prefixAdmin}/roles/permissions?_method=PATCH`
        class="d-none"
    )
        input(
            type="text"
            class="form-control"
            name="permissions"
        )
    script(src="/admin/js/roles.js") 
    script(src="/admin/js/showAlert.js") 
